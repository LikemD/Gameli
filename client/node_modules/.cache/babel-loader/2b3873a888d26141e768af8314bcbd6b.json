{"ast":null,"code":"import _regeneratorRuntime from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer,createContext}from'react';import AppReducer from'./AppReducer';import axios from'axios';var initialState={transactions:[],error:null,loading:true};// create context\nexport var GlobalContext=createContext(initialState);// provider \nexport var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];function getTxns(){return _getTxns.apply(this,arguments);}function _getTxns(){_getTxns=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/v1/txns');case 3:res=_context.sent;dispatch({type:'GET_TXNS',payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:'GET_ERR',payload:console.log(_context.t0)});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTxns.apply(this,arguments);}function deleteTransaction(_x){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/api/v1/txns/\".concat(id));case 3:dispatch({type:'DELETE_TXN',payload:id});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch({type:'GET_ERR',payload:console.log(_context2.t0)});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _deleteTransaction.apply(this,arguments);}function addTransaction(_x2){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(transaction){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context3.prev=1;_context3.next=4;return axios.post('/api/v1/txns',transaction,config);case 4:res=_context3.sent;dispatch({type:'ADD_TXN',payload:res.data.data});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:'GET_ERR',payload:console.log(_context3.t0)});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return _addTransaction.apply(this,arguments);}return/*#__PURE__*/React.createElement(GlobalContext.Provider,{value:{transactions:state.transactions,error:state.error,loading:state.loading,deleteTransaction:deleteTransaction,addTransaction:addTransaction,getTxns:getTxns}},children);};export default GlobalProvider;","map":{"version":3,"sources":["/Users/likemdunyo/Desktop/Gameli/client/src/context/GlobalState.js"],"names":["React","useReducer","createContext","AppReducer","axios","initialState","transactions","error","loading","GlobalContext","GlobalProvider","children","state","dispatch","getTxns","get","res","type","payload","data","console","log","deleteTransaction","id","delete","addTransaction","transaction","config","headers","post"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAiBC,UAAjB,CAA6BC,aAA7B,KAAkD,OAAlD,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,YAAY,CAAE,EADG,CAEjBC,KAAK,CAAE,IAFU,CAGjBC,OAAO,CAAE,IAHQ,CAArB,CAKA;AACA,MAAO,IAAMC,CAAAA,aAAa,CAAGP,aAAa,CAACG,YAAD,CAAnC,CAEP;AACA,MAAO,IAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBAChBV,UAAU,CAAEE,UAAF,CAAeE,YAAf,CADM,4CACrCO,KADqC,iBAC7BC,QAD6B,yBAG7BC,CAAAA,OAH6B,+HAG5C,iLAE0BV,CAAAA,KAAK,CAACW,GAAN,CAAU,cAAV,CAF1B,QAEcC,GAFd,eAGQH,QAAQ,CAAC,CACLI,IAAI,CAAE,UADD,CAELC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CAHR,+EAQQN,QAAQ,CAAC,CACLI,IAAI,CAAE,SADD,CAELC,OAAO,CAAEE,OAAO,CAACC,GAAR,aAFJ,CAAD,CAAR,CARR,oEAH4C,kDAkB7BC,CAAAA,iBAlB6B,+JAkB5C,kBAAiCC,EAAjC,8JAEcnB,CAAAA,KAAK,CAACoB,MAAN,wBAA6BD,EAA7B,EAFd,QAGQV,QAAQ,CAAC,CACLI,IAAI,CAAE,YADD,CAELC,OAAO,CAAEK,EAFJ,CAAD,CAAR,CAHR,kFASQV,QAAQ,CAAC,CACLI,IAAI,CAAE,SADD,CAELC,OAAO,CAAEE,OAAO,CAACC,GAAR,cAFJ,CAAD,CAAR,CATR,qEAlB4C,4DAkC7BI,CAAAA,cAlC6B,uJAkC5C,kBAA8BC,WAA9B,qIACUC,MADV,CACmB,CACXC,OAAO,CAAC,CACJ,eAAe,kBADX,CADG,CADnB,yCAO0BxB,CAAAA,KAAK,CAACyB,IAAN,CAAW,cAAX,CAA2BH,WAA3B,CAAwCC,MAAxC,CAP1B,QAOcX,GAPd,gBAQQH,QAAQ,CAAC,CACLI,IAAI,CAAE,SADD,CAELC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CARR,mFAaQN,QAAQ,CAAC,CACLI,IAAI,CAAE,SADD,CAELC,OAAO,CAAEE,OAAO,CAACC,GAAR,cAFJ,CAAD,CAAR,CAbR,sEAlC4C,iDAuD5C,mBACI,oBAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAC3Bf,YAAY,CAAEM,KAAK,CAACN,YADO,CAE3BC,KAAK,CAAEK,KAAK,CAACL,KAFc,CAG3BC,OAAO,CAAEI,KAAK,CAACJ,OAHY,CAI3Bc,iBAAiB,CAAjBA,iBAJ2B,CAK3BG,cAAc,CAAdA,cAL2B,CAM3BX,OAAO,CAAPA,OAN2B,CAA/B,EAQKH,QARL,CADJ,CAYH,CAnEM,CAoEP,cAAeD,CAAAA,cAAf","sourcesContent":["import React , { useReducer, createContext } from 'react';\nimport AppReducer from './AppReducer';\nimport axios from 'axios';\n\nconst initialState = {\n    transactions: [],\n    error: null,\n    loading: true\n};\n// create context\nexport const GlobalContext = createContext(initialState);\n\n// provider \nexport const GlobalProvider = ({ children }) => {\n    const [state , dispatch ] = useReducer( AppReducer , initialState);\n\n    async function getTxns(){\n        try {\n            const res = await axios.get('/api/v1/txns');\n            dispatch({\n                type: 'GET_TXNS',\n                payload: res.data.data\n            });\n        } catch (err) {\n            dispatch({\n                type: 'GET_ERR',\n                payload: console.log(err)\n            });\n        }\n    }\n\n    async function deleteTransaction(id){\n        try {\n            await axios.delete(`/api/v1/txns/${id}`);\n            dispatch({\n                type: 'DELETE_TXN',\n                payload: id\n            });\n            \n        } catch (err) {\n            dispatch({\n                type: 'GET_ERR',\n                payload: console.log(err)\n            });\n        }\n    }\n\n    async function addTransaction(transaction){\n        const config = {\n            headers:{\n                \"Content-Type\":\"application/json\"\n            }\n        }\n        try {\n            const res = await axios.post('/api/v1/txns', transaction, config);\n            dispatch({\n                type: 'ADD_TXN',\n                payload: res.data.data\n            });\n        } catch (err) {\n            dispatch({\n                type: 'GET_ERR',\n                payload: console.log(err)\n            });\n            \n        }\n    }\n\n    return (\n        <GlobalContext.Provider value={{\n            transactions: state.transactions,\n            error: state.error,\n            loading: state.loading,\n            deleteTransaction,\n            addTransaction,\n            getTxns\n            }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}\nexport default GlobalProvider;"]},"metadata":{},"sourceType":"module"}