{"ast":null,"code":"import _regeneratorRuntime from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/likemdunyo/Desktop/Gameli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer,createContext}from'react';import AppReducer from'./AppReducer';import axios from'axios';var initialState={transactions:[],firstName:'',userId:'',error:null,loading:true,step:1};// create context\nexport var GlobalContext=createContext(initialState);// provider \nexport var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];function getTxns(){return _getTxns.apply(this,arguments);}function _getTxns(){_getTxns=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/txns\");case 3:res=_context.sent;dispatch({type:'GET_TXNS',payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:'GET_ERR',payload:console.log(_context.t0)});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTxns.apply(this,arguments);}function deleteTransaction(_x){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/api/v1/txns/\".concat(id));case 3:dispatch({type:'DELETE_TXN',payload:id});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch({type:'GET_ERR',payload:console.log(_context2.t0)});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _deleteTransaction.apply(this,arguments);}function addTransaction(_x2){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(transaction){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context3.prev=1;_context3.next=4;return axios.post(\"/api/v1/txns\",transaction,config);case 4:res=_context3.sent;dispatch({type:'ADD_TXN',payload:res.data.data});console.log(res);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch({type:'GET_ERR',payload:console.log(_context3.t0)});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return _addTransaction.apply(this,arguments);}function login(_x3){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post('api/v1/users/login',data);case 3:res=_context4.sent;dispatch({type:'LOGIN',payload:res.data.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:'GET_ERR',payload:console.log(_context4.t0)});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return _login.apply(this,arguments);}function dateFilter(_x4,_x5){return _dateFilter.apply(this,arguments);}function _dateFilter(){_dateFilter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(sDate,eDate){var startDate,endDate,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:startDate=new Date(sDate);endDate=new Date(eDate);_context5.prev=2;_context5.next=5;return axios.get('api/v1/txns/sortDate',{params:{startDate:startDate,endDate:endDate}});case 5:res=_context5.sent;dispatch({type:'DATE_FILTER',payload:res.data.data});_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](2);console.log(_context5.t0);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[2,9]]);}));return _dateFilter.apply(this,arguments);}function register(_x6){return _register.apply(this,arguments);}function _register(){_register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!data){_context6.next=11;break;}_context6.prev=1;_context6.next=4;return axios.post('api/v1/users/register',data);case 4:res=_context6.sent;if(res)console.log('success');_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](1);console.log(_context6.t0);case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[1,8]]);}));return _register.apply(this,arguments);}return/*#__PURE__*/React.createElement(GlobalContext.Provider,{value:{transactions:state.transactions,error:state.error,loading:state.loading,userId:state.userId,firstName:state.firstName,step:state.step,deleteTransaction:deleteTransaction,addTransaction:addTransaction,getTxns:getTxns,login:login,register:register,dateFilter:dateFilter}},children);};export default GlobalProvider;","map":{"version":3,"sources":["/Users/likemdunyo/Desktop/Gameli/client/src/context/GlobalState.js"],"names":["React","useReducer","createContext","AppReducer","axios","initialState","transactions","firstName","userId","error","loading","step","GlobalContext","GlobalProvider","children","state","dispatch","getTxns","get","res","type","payload","data","console","log","deleteTransaction","id","delete","addTransaction","transaction","config","headers","post","login","dateFilter","sDate","eDate","startDate","Date","endDate","params","register"],"mappings":"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","sourcesContent":["import React , { useReducer, createContext } from 'react';\nimport AppReducer from './AppReducer';\nimport axios from 'axios';\n\nconst initialState = {\n    transactions: [],\n    firstName: '',\n    userId: '',\n    error: null,\n    loading: true,\n    step: 1\n};\n// create context\nexport const GlobalContext = createContext(initialState);\n\n// provider \nexport const GlobalProvider = ({ children }) => {\n    const [state , dispatch ] = useReducer( AppReducer , initialState);\n\n    async function getTxns(){\n            try {\n                const res = await axios.get(`/api/v1/txns`);\n                dispatch({\n                    type: 'GET_TXNS',\n                    payload: res.data.data\n                });\n            } catch (err) {\n                dispatch({\n                    type: 'GET_ERR',\n                    payload: console.log(err)\n                });\n            }\n        \n    }\n\n    async function deleteTransaction(id){\n            try {\n                await axios.delete(`/api/v1/txns/${id}`);\n                dispatch({\n                    type: 'DELETE_TXN',\n                    payload: id\n                });\n                \n            } catch (err) {\n                dispatch({\n                    type: 'GET_ERR',\n                    payload: console.log(err)\n                });\n            }\n    }\n\n    async function addTransaction(transaction){\n        const config = {\n            headers:{\n                \"Content-Type\":\"application/json\"\n            }\n        }\n            try {\n                const res = await axios.post(`/api/v1/txns`, transaction, config);\n                dispatch({\n                    type: 'ADD_TXN',\n                    payload: res.data.data\n                });\n                console.log(res)\n            } catch (err) {\n                dispatch({\n                    type: 'GET_ERR',\n                    payload: console.log(err)\n                });\n                \n            }\n    }\n\n    async function login(data){\n        try {\n            const res = await axios.post('api/v1/users/login' , data)\n            dispatch({\n                type: 'LOGIN',\n                payload: res.data.data\n            })\n        } catch (error) {\n            dispatch({\n                type: 'GET_ERR',\n                payload: console.log(error)\n            })\n        }\n    }\n\n    async function dateFilter(sDate , eDate){\n        const startDate = new Date(sDate)\n        const endDate = new Date(eDate)\n\n        try {\n           const res = await axios.get('api/v1/txns/sortDate' , {params: {startDate , endDate}})\n            dispatch({\n                type: 'DATE_FILTER',\n                payload: res.data.data\n            })      \n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    async function register(data){\n        if(data){\n            try {\n                const res = await axios.post('api/v1/users/register', data);\n                if(res) console.log('success')\n            } catch (error) {\n                console.log(error)\n            }\n        }\n    }\n\n\n    return (\n        <GlobalContext.Provider value={{\n            transactions: state.transactions,\n            error: state.error,\n            loading: state.loading,\n            userId: state.userId,\n            firstName: state.firstName,\n            step: state.step,\n            deleteTransaction,\n            addTransaction,\n            getTxns,\n            login,\n            register,\n            dateFilter\n            }}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}\nexport default GlobalProvider;"]},"metadata":{},"sourceType":"module"}